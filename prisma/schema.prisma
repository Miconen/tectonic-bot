generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model guilds {
  guild_id   String  @id @unique(map: "guild_id") @db.VarChar(32)
  multiplier Int     @default(1)
  users      users[]
}

model rsn {
  rsn      String @db.VarChar(32)
  wom_id   String @db.VarChar(32)
  user_id  String @db.VarChar(32)
  guild_id String @db.VarChar(32)
  users    users  @relation(fields: [user_id, guild_id], references: [user_id, guild_id], onDelete: Cascade, map: "rsn_ibfk_1")

  @@id([wom_id, guild_id])
  @@index([user_id, guild_id], map: "rsn_ibfk_1")
}

model users {
  user_id  String @db.VarChar(32)
  guild_id String @db.VarChar(32)
  points   Int    @default(0)
  rsn      rsn[]
  guilds   guilds @relation(fields: [guild_id], references: [guild_id], onUpdate: Restrict, map: "users_ibfk_1")

  @@id([user_id, guild_id], name: "ids")
  @@index([guild_id], map: "guild_id")
  @@index([user_id], map: "user_id")
}
